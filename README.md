# CALPAV1.0 
#### Video Demo: <https://youtu.be/rGpCnUP59xs?si=kAyM6zGOCelTDLrv> 
#### Description: 
My name is Saúl David Martínez González, and I have developed the code for the CS50 project, which implements the CALPAV 1.0 application. This Spanish tool for road engineering calculates the traffic level for a given road and performs its structural design using the Cuban Standard 334 from 2018 (NC334 2018). The application is developed in Python using libraries like 'customtkinter' for the graphical interface, 'sqlite3' for data management, as well as 'numpy' and 'math' for complex calculations. The application is structured into three main modules: 'Home Page', 'Traffic Calculation', and 'Pavement Design'. It follows an implicit MVC architecture, separating business logic, data, and interface components. 
Upon startup, the application opens a window where the 'centercp' function calculates the window's position dynamically (1380x600 pixels) and centers it on the screen using 'winfo_screenwidth/height' along with Tkinter geometry. A backup copy (database_copia.db) of the original database (database.db) is created at startup. When the application is closed (using the 'cerrar_aplicacion' function), the original database is restored to maintain its integrity, preventing corruption from failed operations. 
The initial interface, known as the 'Home Page', features an expandable sidebar implemented with 'CTkFrame' that utilizes animations ('extendbar'/'closebar') to adjust its width between 53 and 243 pixels, depending on user interaction. The menu includes four buttons: a three-bar button that toggles its icon between 'close' and 'expand', enabling the user to enlarge the menu for a clearer view of the options. These include the 'Home' button, which displays a welcome image and accesses the application's home page ('iniciopage'); the 'Traffic Calculation' button, which shows an image of a vehicle and leads to the page for entering vehicle data and calculating traffic level ('caltrafpage'); and the 'Pavement Design' button, which features an image of the application icon. The thicknesses of the pavement layers are calculated based on the quality of materials used and the calculated traffic level. The frames are destroyed and recreated when changing sections to optimize resources. 
The Home Page module simply displays the application's logo along with the text "Welcome to CALPAV 1.0". 
In the 'Traffic Calculation' Page module, a scrollable frame at the top is provided for entering main vehicle data. It consists of 43 fields organized into categories (cars, buses, rigid and articulated trucks) and load states (empty, intermediate, full). Users input the number of vehicles observed during a count conducted on a roadway similar to the one being designed. The 'CTkEntry' widget is used for these data entries. This frame includes 'Modify' and 'Delete' buttons that call the functions 'modificarsiluetas' and 'borrarsiluetas', respectively. The first function allows users to modify the input data, while the second resets all values to zero. Additionally, 'CTkCheckBox' is employed to let users select variations in load level for certain silhouettes. 
At the bottom of the page, another frame contains essential fields: "ICD" (Daily truck volume), "TPDA" (Average daily annual traffic), "Pcd" (Percentage of daily trucks), "r" (Growth rate), and "n" (Design period). These data points are necessary for performing traffic calculations according to applicable regulations. It's noteworthy that ICD data is derived from TPDA and Pcd values. To facilitate data entry, two switches on the left allow users to choose between calculating ICD or entering it manually, created using "CTkSwitch". Similar to the previous frame, there are "Modify" and "Delete" buttons that invoke the "modificardatos" and "borrardatos" functions for data modification and reset. A third button named "Calculate" invokes the "calcular" function to compute the traffic level based on the entered data according to NC334 2018. 
The "validate" function is employed for all entries, ensuring that only floating-point numbers or empty fields can be entered in numeric fields, using Tkinter's "register" validation system ("validar_entries"). This prevents letters from being entered in numeric fields. Additionally, it handles division by zero and converts any empty fields to zero, blocking the interface as needed and displaying error messages via a "messagebox" if validations fail. 
On the page, two other frames provide the user with information about the different parameters calculated throughout the process involving the entered data. The user can learn about the formulations used for the calculation; in addition, the final value of the traffic level and its classification are displayed. All this information is shown using "CTkLabel". The Equivalence Factor (Fe) parameter is a button that calls the "showrecord" function, which displays a pop-up window with "CTkToplevel" where a table is created using "ttk.Treeview" that shows the summary of the Equivalence Factors for each of the silhouettes used for traffic calculation (See Truck Axis Factor and Equivalence Factor in NC334 2018).
The module of the "Pavement Design" Page first presents two "CTkCheckBox" that allow the user to choose between designing based on the traffic calculated in the previous module or manually entering the desired traffic level value in a "CTkEntry". Then, two "CTkComboBox" labeled "Design Reliability" and "Subgrade Classification" are shown (the information for the names was input using "CTkLabel"), the first allows selecting the parameter of the same name for the design, and the second allows classifying the subgrade according to NC334 2018. It is important to note that the "CTkCheckBox" used for traffic activates the "selectsr" function, which filters the "CTkComboBox" called "Subgrade Classification" according to the value of the traffic level, as this classification depends on whether the traffic is considered light, medium, or heavy.
Then several "CTkEntry" are shown, in which the qualities with which each layer of the pavement will be designed can be entered, where the information for the names was entered using "CTkLabel".
The module also displays a frame similar to a table made with several "CTkLabel" that update to show the final design results. Below the table, there is an image that provides information on the position of the layers of a flexible pavement.
Finally, the module shows three buttons, "Modify", "Delete", and "Design"; the first calls the function of the same name that allows modifying the data in this section, the second calls the function of the same name that allows resetting the data in this section, and the third allows designing the flexible pavement according to all the entered data. Since NC334 2018 uses tables for the design, "queries" from the sqlite3 library were used to retrieve the necessary data from a database created in the DB Browser database management system, which contains the tables from NC334 2018 needed to carry out the design.
This is CS50, and that was CALPAV1.0, the Cuban application for flexible pavement design. Thank you very much.
